!function(){"use strict";angular.module("movvizApp",["ngRoute"]).config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(!0)}])}(),function(){"use strict";function config($routeProvider){$routeProvider.when("/",{templateUrl:"customlistlist.partial.html",controller:"CustomlistListController"}).when("/movies",{templateUrl:"movielist.partial.html",controller:"MovieListController"}).when("/movies/:page",{templateUrl:"movielist.partial.html",controller:"MovieListController"}).when("/movies/:search/:page",{templateUrl:"movielist.partial.html",controller:"MovieListController"}).when("/movie/:id?",{templateUrl:"moviedetail.partial.html",controller:"MovieDetailController"}).otherwise({redirectTo:"/movies"})}angular.module("movvizApp").config(config),config.$inject=["$routeProvider"]}(),function(){"use strict";function MovieListController($scope,$http,$routeParams,$filter,paginatorFactory){var page=parseInt($routeParams.page,10);$scope.searchPattern=$routeParams.search,!$routeParams.search&&$routeParams.page&&(isNaN(page)||page%1)?(page=0,$scope.searchPattern=$routeParams.page):isNaN(page)||page%1?page=0:page--,$scope.paginator=paginatorFactory.create(function(page){page=page||1;var target="/movies/";return $scope.searchPattern&&(target+=$filter("encode")($scope.searchPattern,!0)+"/"),page&&(target+=page),target});var apiUrl=($scope.movies=[],"/api/movies/");$scope.searchPattern&&(apiUrl+=$filter("encode")($scope.searchPattern,!0)+"/"),apiUrl+=page,$http.get(apiUrl).success(function(data,status,headers,config){$scope.movies=data.movies,$scope.paginator.currentPage=data.pagination.currentPage,$scope.paginator.totalPages=data.pagination.totalPages}).error(function(data,status,headers,config){console.log("error")}),$scope.searchPattern&&($scope.searchPatternForm=$scope.searchPattern),$scope.search=function(){$scope.searchPattern=$scope.searchPatternForm,$scope.paginator["goto"]()},$scope.$on("$viewContentLoaded",function(){$("#movie-list .form > form").affix({offset:{top:0}})})}angular.module("movvizApp").controller("MovieListController",MovieListController),MovieListController.$inject=["$scope","$http","$routeParams","$filter","paginatorFactory"]}(),function(){"use strict";function MovieDetailController($scope,$http,$routeParams){$http.get("/api/movie/"+$routeParams.id).success(function(data,status,headers,config){$scope.movie=data}).error(function(data,status,headers,config){console.log("error")})}angular.module("movvizApp").controller("MovieDetailController",MovieDetailController),MovieDetailController.$inject=["$scope","$http","$routeParams"]}(),function(){"use strict";function CustomlistListController($scope,$http){$http.get("/api/customlists/results").success(function(data,status,headers,config){$scope.customlists=data}).error(function(data,status,headers,config){console.log("error")})}angular.module("movvizApp").controller("CustomlistListController",CustomlistListController),CustomlistListController.$inject=["$scope","$http"]}(),function(){"use strict";function stopEvent(){return{restrict:"A",link:function(scope,element,attr){element.bind(attr.stopEvent,function(e){e.stopPropagation()})}}}function disabledLink(){return{link:function(scope,element,attr){element.on("click",function(e){e.preventDefault()})}}}angular.module("movvizApp").directive("stopEvent",stopEvent).directive("disabledLink",disabledLink)}(),function(){"use strict";function encode(){return function(input,rfc3986){var encoded=encodeURIComponent(input);return rfc3986&&(encoded=encoded.replace(/[!'()*]/g,escape)),encoded}}function ucfirst(){return function(input){return input.charAt(0).toUpperCase()+input.slice(1)}}function ucword(){return function(input){for(var words=input.split(" "),nbWords=words.length,i=0;nbWords>i;i++)words[i]=ucfirst()(words[i]);return words.join(" ")}}angular.module("movvizApp").filter("encode",encode).filter("ucfirst",ucfirst).filter("ucword",ucword)}(),function(){"use strict";function pagination(){return{restrict:"E",templateUrl:"/components/paginator/pagination.partial.html"}}angular.module("movvizApp").directive("pagination",pagination)}(),function(){"use strict";function paginatorFactory($location){return{create:function(urlBuilder){var paginator=new Paginator(urlBuilder);return paginator["goto"]=function(page){return $location.path(urlBuilder(page)),!1},paginator}}}angular.module("movvizApp").factory("paginatorFactory",paginatorFactory),paginatorFactory.$inject=["$location"];var Paginator=function(){this.currentPage=0,this.totalPages=0};Paginator.prototype.prevPageDisabled=function(){return this.currentPage?"":"disabled"},Paginator.prototype.nextPageDisabled=function(){return this.currentPage===this.totalPages-1?"disabled":""},Paginator.prototype.range=function(){for(var rangeSize=10,ret=[],start=Math.max(0,Math.ceil(this.currentPage-rangeSize/2)),max=Math.min(this.totalPages,start+rangeSize),i=start;max>i;i++)ret.push(i);return ret}}();
//# sourceMappingURL=movviz.min.js.map